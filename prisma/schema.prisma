generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model HouseholdMember {
  id           String        @id @default(cuid())
  name         String
  restrictions Restriction[]
  likes        Like[]
  dislikes     Dislike[]
  isGuest      Boolean       @default(false)
}

model Restriction {
  id       String          @id @default(cuid())
  name     String
  members  HouseholdMember[]
}

model Like {
  id       String          @id @default(cuid())
  name     String
  members  HouseholdMember[]
}

model Dislike {
  id       String          @id @default(cuid())
  name     String
  members  HouseholdMember[]
}

model PantryItem {
  id      String   @id @default(cuid())
  name    String   @unique
  recipes Recipe[]
}

model Recipe {
  id                      String       @id @default(cuid())
  createdAt               DateTime     @default(now())
  recipe_title            String
  analysis_log            String       @db.Text
  match_reasoning         String       @db.Text
  ingredients_from_pantry Json         // Storing list for display, but also linking to PantryItem
  shopping_list           Json
  step_by_step            Json
  safety_badge            Boolean
  meal_type               String
  difficulty              String
  prep_time               String
  dishImage               String?      @db.Text
  isFavorite              Boolean      @default(false)
  language                String       @default("en")
  pantryItems             PantryItem[]
}

model TagSuggestion {
  id       String @id @default(cuid())
  category String
  tag      String

  @@unique([category, tag])
}
